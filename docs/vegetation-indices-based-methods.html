<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Vegetation-indices-based methods – Remote Sensing of Foliar Nitrogen in Californian Almonds</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./machine-learning-methods-for-hyperspectral-data-analysis.html" rel="next">
<link href="./background.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a01a0c2d2b11ceb43c7631533aab2727.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://damianoswald.com/index.html" class="navbar-brand navbar-brand-logo">
    <img src="./resources/iconDO.png" alt="" class="navbar-logo">
    </a>
  </div>
        <div class="quarto-navbar-tools tools-wide tools-end">
    <a href="https://github.com/damian-oswald/master-thesis/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Remote-Sensing-of-Foliar-Nitrogen-in-Californian-Almonds.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./vegetation-indices-based-methods.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vegetation-indices-based methods</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Background</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vegetation-indices-based-methods.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vegetation-indices-based methods</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machine-learning-methods-for-hyperspectral-data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Machine learning methods for hyperspectral data analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./radiative-transfer-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Radiative transfer models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./describing-processing-and-inspecting-the-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Describing, processing and inspecting the data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical-description-of-the-modelling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Technical description of the modelling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results-of-the-model-performances.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Results of the model performances</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#evolution-of-vegetation-indices-and-their-limitations" id="toc-evolution-of-vegetation-indices-and-their-limitations" class="nav-link active" data-scroll-target="#evolution-of-vegetation-indices-and-their-limitations"><span class="header-section-number">2.1</span> Evolution of vegetation indices and their limitations</a></li>
  <li><a href="#sec-nitrogenVI" id="toc-sec-nitrogenVI" class="nav-link" data-scroll-target="#sec-nitrogenVI"><span class="header-section-number">2.2</span> Nitrogen monitoring with vegetation indices</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/damian-oswald/master-thesis/blob/main/vegetation-indices-based-methods.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/damian-oswald/master-thesis/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-VI" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vegetation-indices-based methods</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Vegetation indices are mathematical constructs — typically expressed as ratios — that are derived from the measurement of vegetation reflectance at two or more specific wavelengths <span class="citation" data-cites="huete2002overview">(<a href="references.html#ref-huete2002overview" role="doc-biblioref">Huete et al. 2002</a>)</span>. These indices are frequently employed to evaluate the health, biophysical properties, and biochemical characteristics of vegetation. Notably, vegetation indices have been utilized for applications such as estimating plant parameters such as the leaf area index, detecting water stress in crops, and classifying various types of vegetation for weed mapping purposes <span class="citation" data-cites="jackson1981canopy zheng2009retrieving">(<a href="references.html#ref-jackson1981canopy" role="doc-biblioref">Jackson et al. 1981</a>, <a href="references.html#ref-zheng2009retrieving" role="doc-biblioref">Zheng and Moskal 2009</a>)</span>. Of particular relevance to the subject of this thesis, they have also been commonly employed for estimating chlorophyll and nitrogen content in crops <span class="citation" data-cites="berger2020crop">(<a href="references.html#ref-berger2020crop" role="doc-biblioref">Berger et al. 2020</a>)</span>. Precision agriculture technologies relying on vegetation indices have been well-integrated into commercial applications, an outcome that can likely be attributed to the simplicity of their implementation and their comparatively early development <span class="citation" data-cites="xue2017significant sishodia2020applications">(<a href="references.html#ref-xue2017significant" role="doc-biblioref">Xue and Su 2017</a>, <a href="references.html#ref-sishodia2020applications" role="doc-biblioref">Sishodia et al. 2020</a>)</span>.</p>
<section id="evolution-of-vegetation-indices-and-their-limitations" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="evolution-of-vegetation-indices-and-their-limitations"><span class="header-section-number">2.1</span> Evolution of vegetation indices and their limitations</h2>
<p>Historically, one of the very first vegetation indices developed was the simple ratio index (RVI). It was proposed by <span class="citation" data-cites="jordan1969derivation">Jordan (<a href="references.html#ref-jordan1969derivation" role="doc-biblioref">1969</a>)</span>.</p>
<p><span id="eq-RVI"><span class="math display">\[\text{RVI} = \frac{\rho_\text{R}}{\rho_\text{NIR}} \tag{2.1}\]</span></span></p>
<p>In this and the following equations, <span class="math inline">\(\rho_\text{R}\)</span> stands for the red band reflectance, whereas <span class="math inline">\(\rho_\text{NIR}\)</span> stands for the near-infrared band reflectance. Not too soon after introduction of the RVI, <span class="citation" data-cites="rouse1973monitoring">Rouse Jr et al. (<a href="references.html#ref-rouse1973monitoring" role="doc-biblioref">1973</a>)</span> proposed the normalized difference vegetation index (NDVI), which until today remains the most widely used vegetation index <span class="citation" data-cites="xue2017significant">(<a href="references.html#ref-xue2017significant" role="doc-biblioref">Xue and Su 2017</a>)</span>.</p>
<p><span id="eq-NDVI"><span class="math display">\[\text{NDVI} = \frac{\rho_\text{NIR}-\rho_\text{R}}{\rho_\text{NIR}+\rho_\text{R}} \tag{2.2}\]</span></span></p>
<p>Compared to the RVI, the NDVI is normalized between the values of −1 and +1. It is quite sensitive to green vegetation, even in sparsely covered areas. However, the NDVI is also influenced by soil colour, brightness, and shadows cast by canopy and clouds, which are undesirable traits for a vegetation index, as it should ideally be affected solely by the presence of vegetation <span class="citation" data-cites="xue2017significant">(<a href="references.html#ref-xue2017significant" role="doc-biblioref">Xue and Su 2017</a>)</span>. Consequently, numerous vegetation indices have been developed subsequent to the NDVI, aiming to address its limitations and incorporate atmospheric corrections <span class="citation" data-cites="kaufman1992atmospherically ren1996approach">(<a href="references.html#ref-kaufman1992atmospherically" role="doc-biblioref">Kaufman and Tanre 1992</a>, <a href="references.html#ref-ren1996approach" role="doc-biblioref">Ren-hua et al. 1996</a>)</span> or adjustments for soil colour and brightness <span class="citation" data-cites="huete1988soil qi1994modified richardson1977distinguishing baret1993soil">(<a href="references.html#ref-richardson1977distinguishing" role="doc-biblioref">Richardson and Wiegand 1977</a>, <a href="references.html#ref-huete1988soil" role="doc-biblioref">Huete 1988</a>, <a href="references.html#ref-baret1993soil" role="doc-biblioref">Baret et al. 1993</a>, <a href="references.html#ref-qi1994modified" role="doc-biblioref">Qi et al. 1994</a>)</span>. A recent review by <span class="citation" data-cites="xue2017significant">Xue and Su (<a href="references.html#ref-xue2017significant" role="doc-biblioref">2017</a>)</span> examined over one hundred vegetation indices, with many specifically targeting the shortcomings of the NDVI. The authors discovered that, in various specific scenarios — considering factors such as a particular crop, soil type, and atmospheric conditions — certain vegetation indices demonstrated superior performance over others.</p>
<p>Early development of vegetation indices primarily relied on bands frequently captured by multispectral cameras, such as red, red edge, and near-infrared wavelengths <span class="citation" data-cites="chlingaryan2018machine">(<a href="references.html#ref-chlingaryan2018machine" role="doc-biblioref">Chlingaryan et al. 2018</a>)</span>. Blue bands were rarely employed, as blue light is more susceptible to atmospheric scattering, which can introduce greater uncertainty in measurements — an aspect of particular significance in satellite-based remote sensing applications. However, the advent of hyperspectral imaging has ushered in the creation of vegetation indices tailored to very specific narrow bands, expanding the capabilities of these tools — but at the same time massively increasing the risk of over-fitting <span class="citation" data-cites="thenkabail2013selection">(<a href="references.html#ref-thenkabail2013selection" role="doc-biblioref">Thenkabail et al. 2013</a>)</span>.</p>
<p>In the end, relationships between vegetation indices and the trait of interest are purely empirical in nature. Typically, data on the plant trait is collected, and various vegetation indices are tested to determine the ones that correlate well with it. This approach can be critiqued as being somewhat unscientific, as it relies more on coincidentally found correlations than on fundamental principles or theories.</p>
<p><span class="citation" data-cites="atzberger2011confining">Atzberger et al. (<a href="references.html#ref-atzberger2011confining" role="doc-biblioref">2011</a>)</span> explicitly outlines five disadvantages associated with using vegetation indices-based methods for crop nitrogen estimation. The first disadvantage is the inverse problem, wherein high-dimensional data is reduced to a single value, which could potentially be derived from varying forms of reflectance. The second drawback involves the partial exploitation of multi- or hyperspectral data, as only a limited number of spectral bands are utilized. This issue is especially relevant to narrow-band vegetation indices, which may also be affected by measurement noise. The third challenge concerns the lack of transferability in the calibration of vegetation indices to specific sensors, as it does not extend to instruments with different characteristics. The fourth issue relates to overfitting, implying that vegetation index-based nitrogen models may be tailored too specifically to the dataset used for model calibration. This can lead to sensitivity regarding crop type, growth stage, underlying soil type, sun-sensor constellation, as well as time and date. Finally, the fifth drawback highlights the need to collect <em>in situ</em> reference data for model establishment, which demands manpower, instrument availability, and therefore imposes a high financial burden on the development.</p>
<p>Despite this criticism, new vegetation indices keep being proposed in the scientific literature. Some of the drawbacks of vegetation indices are addressed by the usage of radiative transfer models: Synthetic data sets are generated, where new vegetation indices aim to correlate with the parameter used to generate the respective data sets <span class="citation" data-cites="hunt2013visible">(<a href="references.html#ref-hunt2013visible" role="doc-biblioref">Hunt Jr et al. 2013</a>)</span>. For example, the radiative transfer model <span class="smallcaps">Prosail</span> has been used to design new vegetation indices <span class="citation" data-cites="cheng2014estimating jin2014newly">(<a href="references.html#ref-cheng2014estimating" role="doc-biblioref">Cheng et al. 2014</a>, <a href="references.html#ref-jin2014newly" role="doc-biblioref">Jin et al. 2014</a>)</span>. This search for new vegetation indices is sometimes even implemented algorithmically, for example by the adoption of = algorithms <span class="citation" data-cites="costa2020new">(<a href="references.html#ref-costa2020new" role="doc-biblioref">Costa et al. 2020</a>)</span>.</p>
</section>
<section id="sec-nitrogenVI" class="level2 page-columns page-full" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-nitrogenVI"><span class="header-section-number">2.2</span> Nitrogen monitoring with vegetation indices</h2>
<p>Vegetation indices represent the most prevalent method for remote detection of crop nitrogen content <span class="citation" data-cites="berger2020crop">(<a href="references.html#ref-berger2020crop" role="doc-biblioref">Berger et al. 2020</a>)</span>. Numerous indices have been intentionally designed to estimate crop nitrogen, while others have simply been found to correlate with it <span class="citation" data-cites="herrmann2010swir">(<a href="references.html#ref-herrmann2010swir" role="doc-biblioref">Herrmann et al. 2010</a>)</span>. These indices mostly capitalize on the correlation between crop nitrogen and chlorophyll content <span class="citation" data-cites="baret2007quantification">(<a href="references.html#ref-baret2007quantification" role="doc-biblioref">Baret et al. 2007</a>)</span>. For instance, the transformed chlorophyll absorption in reflectance index (TCARI) has demonstrated a strong correlation with chlorophyll <span class="citation" data-cites="cui2017comparison">(<a href="references.html#ref-cui2017comparison" role="doc-biblioref">Cui and Zhou 2017</a>)</span>. Some of the most notable vegetation indices employed for crop nitrogen detection can be found in <a href="#tbl-VegetationIndices" class="quarto-xref">table&nbsp;<span>2.1</span></a>.</p>
<div class="column-page-inset-right">
<div id="tbl-VegetationIndices" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[35,45,20]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-VegetationIndices-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.1: Overview of various vegetation indices that were used to estimate foliar nitrogen concentrations. <span class="math inline">\(\rho_\lambda\)</span> for the reflectance at a specific wavelength <span class="math inline">\(\lambda\)</span> (<span class="math inline">\(\rho_{530}\)</span> = green band, <span class="math inline">\(\rho_{685}\)</span> = red band, <span class="math inline">\(\rho_{720}\)</span> = red edge, <span class="math inline">\(\rho_{790}\)</span> = near-infrared). This table was adapted from <span class="citation" data-cites="herrmann2010swir">Herrmann et al. (<a href="references.html#ref-herrmann2010swir" role="doc-biblioref">2010</a>)</span> and <span class="citation" data-cites="tian2011assessing">Tian et al. (<a href="references.html#ref-tian2011assessing" role="doc-biblioref">2011</a>)</span>.
</figcaption>
<div aria-describedby="tbl-VegetationIndices-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 35%">
<col style="width: 45%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Index</strong></th>
<th style="text-align: center;"><strong>Formula</strong></th>
<th style="text-align: left;"><strong>Author</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Normalised Difference Vegetation Index (NDVI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{\text{790}}-\rho_{\text{685}}}{\rho_{\text{790}}+\rho_{\text{685}}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="rouse1973monitoring">Rouse Jr et al. (<a href="references.html#ref-rouse1973monitoring" role="doc-biblioref">1973</a>)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Normalized Difference Red Edge (NDRE)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{790} - \rho_{720}}{\rho_{790} + \rho_{720}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="barnes2000coincident">Barnes et al. (<a href="references.html#ref-barnes2000coincident" role="doc-biblioref">2000</a>)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Modified Chlorophyll Absorption in Reflectance Index (MCARI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{700}}{\rho_{670}} \left[ 0.8 \cdot \rho_{700} - \rho_{670} - 0.2 \cdot \rho_{550} \right]\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="daughtry2000estimating">Daughtry et al. (<a href="references.html#ref-daughtry2000estimating" role="doc-biblioref">2000</a>)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Transformed Chlorophyll Absorption in Reflectance Index (TCARI)</td>
<td style="text-align: center;"><span class="math display">\[3 \left[ \rho_{700} - \rho_{670} - \frac{0.2\cdot\rho_{700}}{\rho_{670}} \left(\rho_{700} - \rho_{550} \right) \right]\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="haboudane2002integrated">Haboudane et al. (<a href="references.html#ref-haboudane2002integrated" role="doc-biblioref">2002</a>)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Green Chlorophyll Index (GCI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{\text{790}}}{\rho_{530}}-1\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="gitelson2003relationships">Gitelson et al. (<a href="references.html#ref-gitelson2003relationships" role="doc-biblioref">2003</a>)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Red Edge Chlorophyll Index (RECI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{\text{790}}}{\rho_{\text{720}}}-1\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="gitelson2003relationships">Gitelson et al. (<a href="references.html#ref-gitelson2003relationships" role="doc-biblioref">2003</a>)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Green Normalised Difference Vegetation Index (GNDVI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{\text{790}}-\rho_{530}}{\rho_{\text{790}}+\rho_{530}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="gitelson1996use">Gitelson et al. (<a href="references.html#ref-gitelson1996use" role="doc-biblioref">1996</a>)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Enhanced Vegetation Index (EVI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\frac{5}{2}(\rho_{\text{790}} - \rho_{\text{720}})}{\rho_{\text{790}} + 6 \ \rho_{\text{720}} + \frac{15}{2} \rho_{\text{470}} + 1}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="huete2002overview">Huete et al. (<a href="references.html#ref-huete2002overview" role="doc-biblioref">2002</a>)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Wide Dynamic Range Vegetation Index (WDRVI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\alpha \rho_{\text{790}}-\rho_{\text{720}}}{\alpha \rho_{\text{790}}+\rho_{\text{720}}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="gitelson2004wide">Gitelson (<a href="references.html#ref-gitelson2004wide" role="doc-biblioref">2004</a>)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Normalized Difference Nitrogen Index (NDNI)</td>
<td style="text-align: center;"><span class="math display">\[\frac{\log_{10} \rho_{1510}^{-1} - \log_{10} \rho_{1680}^{-1}}{\log_{10} \rho_{1510}^{-1} + \log_{10} \rho_{1680}^{-1}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="serrano2002remote">Serrano et al. (<a href="references.html#ref-serrano2002remote" role="doc-biblioref">2002</a>)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">R434</td>
<td style="text-align: center;"><span class="math display">\[\frac{\rho_{\text{434}}}{\rho_{\text{496}} - \rho_{\text{401}}}\]</span></td>
<td style="text-align: left;"><span class="citation" data-cites="tian2011assessing">Tian et al. (<a href="references.html#ref-tian2011assessing" role="doc-biblioref">2011</a>)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<p>But how exactly is a regression model employing vegetation indices constructed? The utilization of vegetation indices on multi- or hyperspectral data results in a dimensionality reduction of the original data. While the initial data possesses multiple dimensions, vegetation indices are one-dimensional. Ideally, a vegetation index employed for crop nitrogen monitoring correlates more strongly with crop nitrogen than any individual band. However, the index itself lacks a unit and, as a consequence, cannot be used directly to estimate crop nitrogen. Therefore, any vegetation index must be linked to the trait of interest <span class="math inline">\(y\)</span> through a connecting function <span class="math inline">\(f\)</span> — a so-called link function.</p>
<p><span id="eq-VIlinkfunction"><span class="math display">\[f: g(\mathbf x) \rightarrow y \tag{2.3}\]</span></span></p>
<p>In this case, <span class="math inline">\(g(\mathbf x)\)</span> represents the vegetation index applied to the spectral data. Typically, a simple linear regression is employed to identify the linking function <span class="math inline">\(f\)</span>. Nevertheless, <span class="math inline">\(f\)</span> could represent any function and might even accept multiple vegetation indices as inputs. For instance, <span class="citation" data-cites="johnson2016crop">Johnson et al. (<a href="references.html#ref-johnson2016crop" role="doc-biblioref">2016</a>)</span> found that a multiple linear regression model yielded better predictions based on multiple vegetation indices than relying on a single vegetation index at a time.</p>
<p>The linking function <span class="math inline">\(f\)</span> could even take the form of a more flexible machine learning model able to represent intricate interactions, such as a random forest or support vector machines <span class="citation" data-cites="sonobe2018crop">(<a href="references.html#ref-sonobe2018crop" role="doc-biblioref">Sonobe et al. 2018</a>)</span>. This practice, however, raises the question of the necessity for vegetation indices in the first place. Machine learning models can be applied directly to the data, enabling the direct selection of relevant features. One could, so to say, “cut out the middleman”. This effectively eliminates several of the issues addressed by <span class="citation" data-cites="atzberger2011confining">Atzberger et al. (<a href="references.html#ref-atzberger2011confining" role="doc-biblioref">2011</a>)</span>. Hence, the application of machine learning algorithms to hyperspectral data in order to estimate crop nitrogen will be the focus of the next chapter.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-atzberger2011confining" class="csl-entry" role="listitem">
Atzberger, C., K. Richter, F. Vuolo, R. Darvishzadeh, and M. Schlerf. 2011. <a href="https://doi.org/10.1117/12.898479">Why confining to vegetation indices? Exploiting the potential of improved spectral observations using radiative transfer models</a>. Pages 263–278 Remote sensing for agriculture, ecosystems, and hydrology XIII. SPIE.
</div>
<div id="ref-baret2007quantification" class="csl-entry" role="listitem">
Baret, F., V. Houlès, and M. Guerif. 2007. <a href="https://doi.org/10.1093/jxb/erl231">Quantification of plant stress using remote sensing observations and crop models: The case of nitrogen management</a>. Journal of experimental botany 58:869–880.
</div>
<div id="ref-baret1993soil" class="csl-entry" role="listitem">
Baret, F., S. Jacquemoud, and J. Hanocq. 1993. <a href="https://doi.org/10.1080/02757259309532166">The soil line concept in remote sensing</a>. Remote Sensing Reviews 7:65–82.
</div>
<div id="ref-barnes2000coincident" class="csl-entry" role="listitem">
Barnes, E., T. Clarke, S. Richards, P. Colaizzi, J. Haberland, M. Kostrzewski, P. Waller, C. Choi, E. Riley, T. Thompson, and others. 2000. Coincident detection of crop water stress, nitrogen status and canopy density using ground based multispectral data. Page 6 Proceedings of the fifth international conference on precision agriculture, bloomington, MN, USA.
</div>
<div id="ref-berger2020crop" class="csl-entry" role="listitem">
Berger, K., J. Verrelst, J.-B. Feret, Z. Wang, M. Wocher, M. Strathmann, M. Danner, W. Mauser, and T. Hank. 2020. <a href="https://doi.org/10.1016/j.rse.2020.111758">Crop nitrogen monitoring: Recent progress and principal developments in the context of imaging spectroscopy missions</a>. Remote Sensing of Environment 242:111758.
</div>
<div id="ref-cheng2014estimating" class="csl-entry" role="listitem">
Cheng, X., G. Yang, X. Xu, T. Chen, Z. Li, H. Feng, D. Wang, and others. 2014. <a href="https://doi.org/10.3964/j.issn.1000-0593(2014)12-3391-06">Estimating canopy water content in wheat based on new vegetation water index</a>. Spectroscopy and Spectral Analysis 34:3391–3396.
</div>
<div id="ref-chlingaryan2018machine" class="csl-entry" role="listitem">
Chlingaryan, A., S. Sukkarieh, and B. Whelan. 2018. <a href="https://doi.org/10.1016/j.compag.2018.05.012">Machine learning approaches for crop yield prediction and nitrogen status estimation in precision agriculture: A review</a>. Computers and Electronics in Agriculture 151:61–69.
</div>
<div id="ref-costa2020new" class="csl-entry" role="listitem">
Costa, L., L. Nunes, and Y. Ampatzidis. 2020. <a href="https://doi.org/10.1016/j.compag.2020.105334">A new visible band index (vNDVI) for estimating NDVI values on RGB images utilizing genetic algorithms</a>. Computers and Electronics in Agriculture 172:105334.
</div>
<div id="ref-cui2017comparison" class="csl-entry" role="listitem">
Cui, S., and K. Zhou. 2017. <a href="https://doi.org/10.1007/s12145-016-0281-3">A comparison of the predictive potential of various vegetation indices for leaf chlorophyll content</a>. Earth Science Informatics 10:169–181.
</div>
<div id="ref-daughtry2000estimating" class="csl-entry" role="listitem">
Daughtry, C. S., C. Walthall, M. Kim, E. B. De Colstoun, and J. McMurtrey Iii. 2000. <a href="https://doi.org/10.1016/S0034-4257(00)00113-9">Estimating corn leaf chlorophyll concentration from leaf and canopy reflectance</a>. Remote Sensing of Environment 74:229–239.
</div>
<div id="ref-gitelson2004wide" class="csl-entry" role="listitem">
Gitelson, A. A. 2004. <a href="https://doi.org/10.1078/0176-1617-01176">Wide dynamic range vegetation index for remote quantification of biophysical characteristics of vegetation</a>. Journal of Plant Physiology 161:165–173.
</div>
<div id="ref-gitelson2003relationships" class="csl-entry" role="listitem">
Gitelson, A. A., Y. Gritz, and M. N. Merzlyak. 2003. <a href="https://doi.org/10.1078/0176-1617-00887">Relationships between leaf chlorophyll content and spectral reflectance and algorithms for non-destructive chlorophyll assessment in higher plant leaves</a>. Journal of Plant Physiology 160:271–282.
</div>
<div id="ref-gitelson1996use" class="csl-entry" role="listitem">
Gitelson, A. A., Y. J. Kaufman, and M. N. Merzlyak. 1996. <a href="https://doi.org/10.1016/S0034-4257(96)00072-7">Use of a green channel in remote sensing of global vegetation from EOS-MODIS</a>. Remote Sensing of Environment 58:289–298.
</div>
<div id="ref-haboudane2002integrated" class="csl-entry" role="listitem">
Haboudane, D., J. R. Miller, N. Tremblay, P. J. Zarco-Tejada, and L. Dextraze. 2002. <a href="https://doi.org/10.1016/S0034-4257(02)00018-4">Integrated narrow-band vegetation indices for prediction of crop chlorophyll content for application to precision agriculture</a>. Remote Sensing of Environment 81:416–426.
</div>
<div id="ref-herrmann2010swir" class="csl-entry" role="listitem">
Herrmann, I., A. Karnieli, D. Bonfil, Y. Cohen, and V. Alchanatis. 2010. <a href="https://doi.org/10.1080/01431160903283892">SWIR-based spectral indices for assessing nitrogen content in potato fields</a>. International Journal of Remote Sensing 31:5127–5143.
</div>
<div id="ref-huete1988soil" class="csl-entry" role="listitem">
Huete, A. R. 1988. <a href="https://doi.org/10.1016/0034-4257(88)90106-X">A soil-adjusted vegetation index (SAVI)</a>. Remote Sensing of Environment 25:295–309.
</div>
<div id="ref-huete2002overview" class="csl-entry" role="listitem">
Huete, A., K. Didan, T. Miura, E. P. Rodriguez, X. Gao, and L. G. Ferreira. 2002. <a href="https://doi.org/10.1016/S0034-4257(02)00096-2">Overview of the radiometric and biophysical performance of the MODIS vegetation indices</a>. Remote Sensing of Environment 83:195–213.
</div>
<div id="ref-hunt2013visible" class="csl-entry" role="listitem">
Hunt Jr, E. R., P. C. Doraiswamy, J. E. McMurtrey, C. S. Daughtry, E. M. Perry, and B. Akhmedov. 2013. <a href="https://doi.org/10.1016/j.jag.2012.07.020">A visible band index for remote sensing leaf chlorophyll content at the canopy scale</a>. International journal of applied earth observation and geoinformation 21:103–112.
</div>
<div id="ref-jackson1981canopy" class="csl-entry" role="listitem">
Jackson, R. D., S. Idso, R. Reginato, and P. Pinter Jr. 1981. <a href="https://doi.org/10.1029/WR017i004p01133">Canopy temperature as a crop water stress indicator</a>. Water resources research 17:1133–1138.
</div>
<div id="ref-jin2014newly" class="csl-entry" role="listitem">
Jin, X., Z. Li, H. Feng, X. Xu, and G. Yang. 2014. <a href="https://doi.org/10.1109/JSTARS.2014.2360069">Newly combined spectral indices to improve estimation of total leaf chlorophyll content in cotton</a>. IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing 7:4589–4600.
</div>
<div id="ref-johnson2016crop" class="csl-entry" role="listitem">
Johnson, M. D., W. W. Hsieh, A. J. Cannon, A. Davidson, and F. Bédard. 2016. Crop yield forecasting on the canadian prairies by remotely sensed vegetation indices and machine learning methods. Agricultural and forest meteorology 218:74–84.
</div>
<div id="ref-jordan1969derivation" class="csl-entry" role="listitem">
Jordan, C. F. 1969. <a href="https://doi.org/10.2307/1936256">Derivation of leaf-area index from quality of light on the forest floor</a>. Ecology 50:663–666.
</div>
<div id="ref-kaufman1992atmospherically" class="csl-entry" role="listitem">
Kaufman, Y. J., and D. Tanre. 1992. <a href="https://doi.org/10.1109/36.134076">Atmospherically resistant vegetation index (ARVI) for EOS-MODIS</a>. IEEE Transactions on Geoscience and Remote Sensing 30:261–270.
</div>
<div id="ref-qi1994modified" class="csl-entry" role="listitem">
Qi, J., A. Chehbouni, A. R. Huete, Y. H. Kerr, and S. Sorooshian. 1994. <a href="https://doi.org/10.1016/0034-4257(94)90134-1">A modified soil adjusted vegetation index</a>. Remote Sensing of Environment 48:119–126.
</div>
<div id="ref-ren1996approach" class="csl-entry" role="listitem">
Ren-hua, Z., N. Rao, and K. Liao. 1996. Approach for a vegetation index resistant to atmospheric effect. Journal of Integrative Plant Biology 38.
</div>
<div id="ref-richardson1977distinguishing" class="csl-entry" role="listitem">
Richardson, A. J., and C. Wiegand. 1977. Distinguishing vegetation from soil background information. Photogrammetric engineering and remote sensing 43:1541–1552.
</div>
<div id="ref-rouse1973monitoring" class="csl-entry" role="listitem">
Rouse Jr, J. W., R. H. Haas, J. Schell, and D. Deering. 1973. <a href="https://ntrs.nasa.gov/citations/19740022555">Monitoring the vernal advancement and retrogradation (green wave effect) of natural vegetation</a>. Texas A&amp;M University Remote Sensing Center.
</div>
<div id="ref-serrano2002remote" class="csl-entry" role="listitem">
Serrano, L., J. Penuelas, and S. L. Ustin. 2002. <a href="https://doi.org/10.1016/S0034-4257(02)00011-1">Remote sensing of nitrogen and lignin in mediterranean vegetation from AVIRIS data: Decomposing biochemical from structural signals</a>. Remote sensing of Environment 81:355–364.
</div>
<div id="ref-sishodia2020applications" class="csl-entry" role="listitem">
Sishodia, R. P., R. L. Ray, and S. K. Singh. 2020. <a href="https://doi.org/10.3390/rs12193136">Applications of remote sensing in precision agriculture: A review</a>. Remote Sensing 12:3136.
</div>
<div id="ref-sonobe2018crop" class="csl-entry" role="listitem">
Sonobe, R., Y. Yamaya, H. Tani, X. Wang, N. Kobayashi, and K. Mochizuki. 2018. <a href="https://doi.org/10.1117/1.JRS.12.026019">Crop classification from sentinel-2-derived vegetation indices using ensemble learning</a>. Journal of Applied Remote Sensing 12:026019–026019.
</div>
<div id="ref-thenkabail2013selection" class="csl-entry" role="listitem">
Thenkabail, P. S., I. Mariotto, M. K. Gumma, E. M. Middleton, D. R. Landis, and K. F. Huemmrich. 2013. <a href="https://doi.org/10.1109/JSTARS.2013.2252601">Selection of hyperspectral narrowbands (HNBs) and composition of hyperspectral twoband vegetation indices (HVIs) for biophysical characterization and discrimination of crop types using field reflectance and hyperion/EO-1 data</a>. IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing 6:427–439.
</div>
<div id="ref-tian2011assessing" class="csl-entry" role="listitem">
Tian, Y., X. Yao, J. Yang, W. Cao, D. Hannaway, and Y. Zhu. 2011. <a href="https://doi.org/10.1016/j.fcr.2010.11.002">Assessing newly developed and published vegetation indices for estimating rice leaf nitrogen concentration with ground-and space-based hyperspectral reflectance</a>. Field Crops Research 120:299–310.
</div>
<div id="ref-xue2017significant" class="csl-entry" role="listitem">
Xue, J., and B. Su. 2017. <a href="https://doi.org/10.1155/2017/1353691">Significant remote sensing vegetation indices: A review of developments and applications</a>. Journal of sensors 2017:1–17.
</div>
<div id="ref-zheng2009retrieving" class="csl-entry" role="listitem">
Zheng, G., and M. Moskal. 2009. <a href="https://doi.org/10.3390/s90402719">Retrieving leaf area index (LAI) using remote sensing: Theories, methods and sensors</a>. Sensors 9:2719–2745.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./background.html" class="pagination-link" aria-label="Background">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Background</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./machine-learning-methods-for-hyperspectral-data-analysis.html" class="pagination-link" aria-label="Machine learning methods for hyperspectral data analysis">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Machine learning methods for hyperspectral data analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2023, Damian Oswald</p>
</div>   
    <div class="nav-footer-center">
<p>Remote Sensing of Foliar Nitrogen in Californian Almonds (2023)</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/damian-oswald/master-thesis/blob/main/vegetation-indices-based-methods.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/damian-oswald/master-thesis/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Damian-Oswald">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/damian-oswald">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:damian.oswald@protonmail.com">
      <i class="bi bi-envelope-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>